(this["webpackJsonpcross-split"]=this["webpackJsonpcross-split"]||[]).push([[0],{19:function(t,e,n){t.exports=n(30)},24:function(t,e,n){},30:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(13),l=n.n(r),s=(n(24),n(1)),o=n(2),u=n(5),c=n(6),m=n(3),p=n(14),d=n.n(p),h=n(4);function g(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return g=function(){return t},t}var f=h.a.div(g()),v=function(t){return i.a.createElement(f,null,i.a.createElement("input",{placeholder:"Game",onChange:function(e){return t.changeTitle(e.target.value)},value:t.gameName||""}),i.a.createElement("input",{placeholder:"Platform",onChange:function(e){return t.changePlatform(e.target.value)},value:t.gamePlatform||""}),i.a.createElement("input",{placeholder:"Category",onChange:function(e){return t.changeCategory(e.target.value)},value:t.gameCategory||""}))},b=n(18);function T(){var t=Object(m.a)(["\n  display: flex;\n  height: 40px;\n  align-items: center;\n  justify-content: center;\n  transition: 0.2s all;\n  background-color: ",";\n  input {\n    &:disabled {\n      background-color: ",";\n      border: ",";\n      color: black;\n    }\n  }\n  &:hover {\n    cursor: pointer;\n  }\n  button {\n    &:hover {\n      background-color: pink;\n      color: black;\n    }\n  }\n"]);return T=function(){return t},t}var S=h.a.div(T(),(function(t){return t.current?"orange":"grey"}),(function(t){return t.editMode?"purple":"orange"}),(function(t){return t.editMode?"none":"grey"})),y=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t,e,n=this;return i.a.createElement(S,{current:this.props.isCurrentSplit,editMode:this.props.editMode},i.a.createElement("input",{disabled:!this.props.editMode,placeholder:"Split title",value:(null===(t=this.props.split)||void 0===t?void 0:t.name)||"",onChange:function(t){return n.props.updateSplitValue(t.target.value,n.props.split.id,"name")}}),i.a.createElement("h1",null,(null===(e=this.props.split)||void 0===e?void 0:e.previousTime)||"--"),this.props.editMode?i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return n.props.addSplit(n.props.index)}},"Add Split ^"),i.a.createElement("button",{onClick:function(){return n.props.addSplit(n.props.index+1)}},"Add Split V"),i.a.createElement("button",{onClick:function(){return n.props.removeSplit(n.props.split)}},"delete")):null)}}]),n}(a.Component);function k(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n  .splits-buttons {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]);return k=function(){return t},t}var O=h.a.div(k());Array.prototype.insert=function(t,e){return this.splice(t,0,e)};var P=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={splits:[{id:"init-split"}],currentSplitIndex:0},t.cleanSplits=function(){t.setState({splits:t.props.splits,currentSplitIndex:0})},t.removeSplit=function(e){var n,a;if((null===(n=t.state)||void 0===n||null===(a=n.splits)||void 0===a?void 0:a.length)>=2){var i,r=null===(i=t.state.splits)||void 0===i?void 0:i.filter((function(t){return t!==e}));t.setState({splits:r})}},t.addSplit=function(e){var n=t.state.splits;n.insert(e,{id:Date.now()}),n.filter((function(t){return t})),t.setState({splits:n})},t.updateSplitValue=function(e,n,a){var i,r=null===(i=t.state.splits)||void 0===i?void 0:i.map((function(t){return t.id===n?Object.assign({},t,Object(b.a)({},a,e)):t}));t.setState({splits:r})},t.nextSplit=function(){var e,n;t.setPrevTime(),t.state.currentSplitIndex>=(null===(e=t.state.splits)||void 0===e?void 0:e.length)-1?t.setState({currentSplitIndex:0},(function(){t.props.stopTimers()})):t.state.currentSplitIndex<=(null===(n=t.state.splits)||void 0===n?void 0:n.length)-1&&t.setState({currentSplitIndex:t.state.currentSplitIndex+1})},t.setPrevTime=function(){var e=t.state.splits[t.state.currentSplitIndex];t.updateSplitValue(t.props.globalTime,e.id,"previousTime")},t.clearSplitTimes=function(){var e,n=null===(e=t.state.splits)||void 0===e?void 0:e.map((function(t){return Object.assign({},t,{previousTime:null})}));t.setState({splits:n})},t}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(t){t.currentProfile!==this.props.currentProfile&&this.cleanSplits(),t.game!==this.props.game&&this.cleanSplits()}},{key:"render",value:function(){var t,e,n,a=this;return i.a.createElement(O,null,i.a.createElement("div",null,null===(t=this.state.splits)||void 0===t?void 0:t.map((function(t,e){return i.a.createElement(y,{editMode:a.props.editMode,globalTimerOn:a.props.globalTimerOn,globalTimerPaused:a.props.globalTimerPaused,isCurrentSplit:e===a.state.currentSplitIndex,key:t.id,index:e,updateSplitValue:a.updateSplitValue,addSplit:a.addSplit,removeSplit:a.removeSplit,split:t,globalTime:a.props.globalTime})}))),i.a.createElement("button",{disabled:!this.props.globalTimerOn||this.props.globalTimerPaused,onClick:function(){return a.nextSplit()}},"Next Split"),this.props.editMode?i.a.createElement("div",{className:"splits-buttons"},i.a.createElement("button",{disabled:this.props.globalTimerOn||this.props.globalTimerPaused||!(null===(e=this.state.splits[0])||void 0===e?void 0:e.previousTime),onClick:function(){return a.clearSplitTimes()}},"Clear Times"),i.a.createElement("button",{disabled:!(null===(n=this.props.game)||void 0===n?void 0:n.name),onClick:function(){return a.props.updateCurrentGame(a.state.splits)}},"Save Splits")):null)}}]),n}(a.Component),C=n(7),E=n.n(C),x=function(){function t(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(s.a)(this,t),this.remaining=0,this.state=0,this.name=e,this.interval=a,this.callback=n,this.maxFires=i,this.pausedTime=0,this.startTimeStamp=null,this.currentTimeStamp=null,this.count=0,this.fires=0,this.currentTime=""}return Object(o.a)(t,[{key:"proxyCallback",value:function(){this.currentTimeStamp=E()(),this.count=+this.currentTimeStamp-+this.startTimestamp,null!==this.maxFires&&this.fires>=this.maxFires?this.stop():(this.lastTimeFired=new Date,this.fires++,this.count>3599999?this.currentTime=E()(this.count).utcOffset(0).format("HH:mm:ss.SS"):this.count>59999?this.currentTime=E()(this.count).utcOffset(0).format("mm:ss.SS"):this.currentTime=E()(this.count).utcOffset(0).format("ss.SS"),this.callback())}},{key:"start",value:function(t,e){var n=this;t&&(this.startTimestamp=E()()),e&&(console.log(e,"-=-=-=-=-= New Start Point",this.name),this.startTimestamp=E()().add(e,"milliseconds")),this.timerId=setInterval((function(){return n.proxyCallback()}),this.interval),this.lastTimeFired=new Date,this.state=1,this.fires=0}},{key:"pause",value:function(){1!==this.state&&3!==this.state||(console.log("Pausing Timer "+this.name),this.remaining=this.interval-(new Date-this.lastTimeFired)+this.pausedTime,this.lastPauseTime=new Date,clearInterval(this.timerId),clearTimeout(this.resumeId),this.state=2,this.callback())}},{key:"resume",value:function(){var t=this;2===this.state&&(this.pausedTime+=new Date-this.lastPauseTime,console.log("Resuming Timer ".concat(this.name," with ").concat(this.remaining," remaining")),this.state=3,this.resumeId=setTimeout((function(){return t.timeoutCallback()}),this.remaining),this.callback())}},{key:"timeoutCallback",value:function(){3===this.state&&(this.pausedTime=0,this.proxyCallback(),this.start(!1))}},{key:"stop",value:function(){0!==this.state&&(console.log("Stopping Timer %s. Fired %s/%s times",this.name,this.fires,this.maxFires),clearInterval(this.timerId),clearTimeout(this.resumeId),this.currentTime="",this.state=0,this.callback())}},{key:"setInterval",value:function(t){console.log("Changing interval from %s to %s for %s",this.interval,t,this.name),1===this.state?(this.pause(),this.interval=t,this.resume()):this.interval=t}},{key:"setMaxFires",value:function(t){null!==t&&this.fires>=t&&this.stop(),this.maxFires=t}}]),t}();function j(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return j=function(){return t},t}var G=h.a.div(j()),w=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={currentTime:"",timerState:null,lastKnownTime:null},t.timer=new x("main",(function(){t.updateTimer()}),10),t.updateTimer=function(){t.setState({currentTime:t.timer.currentTime,timerState:t.timer.state},(function(){t.props.updateGlobalTime(t.timer.currentTime)}))},t}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(t){var e=this;!t.globalTimerOn||this.props.globalTimerOn||this.props.globalTimerPaused||this.setState({lastKnownTime:this.state.currentTime},(function(){e.timer.stop()}))}},{key:"render",value:function(){var t=this;return i.a.createElement(G,null,i.a.createElement("h1",null,this.state.currentTime||this.state.lastKnownTime),i.a.createElement("button",{disabled:1===this.state.timerState||2===this.state.timerState,onClick:function(){t.props.toggleGlobalTimer(),t.timer.start(!0)}},"Start"),i.a.createElement("button",{disabled:0===this.state.timerState||1!==this.state.timerState||!this.state.timerState,onClick:function(){t.timer.stop(),t.props.toggleGlobalTimer()}},"Stop"),i.a.createElement("button",{disabled:1!==this.state.timerState||2===this.state.timerState||!this.state.timerState,onClick:function(){t.timer.pause(),t.props.toggleGlobalPause()}},"Pause"),i.a.createElement("button",{disabled:2!==this.state.timerState||3===this.state.timerState,onClick:function(){t.timer.resume(),t.props.toggleGlobalPause()}},"Resume"))}}]),n}(a.Component);function I(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return I=function(){return t},t}var M=h.a.div(I()),D=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={game:null,currentProfile:null,globalTimerOn:!1,globalTimerPaused:!1,splitStartPoint:0,globalTime:0,editMode:!0},t.toggleGlobalTimer=function(){t.setState({globalTimerOn:!t.state.globalTimerOn})},t.toggleGlobalPause=function(){t.setState({globalTimerPaused:!t.state.globalTimerPaused})},t.stopTimers=function(){t.setState({globalTimerOn:!1,globalTimerPaused:!1})},t.updateGlobalTime=function(e){t.setState({globalTime:e})},t.buildSaveObject=function(){var e,n={games:(null===(e=t.state.currentProfile)||void 0===e?void 0:e.games)||[]};return n.games=n.games.filter((function(e){return e.name!==t.state.game.name})),n.games.find((function(e){return e.name===t.state.game.name}))||n.games.push(t.state.game),n},t.saveData=function(){var e=t.buildSaveObject();localStorage.setItem("profileSave",JSON.stringify(e)),t.loadData(t.state.game.name)},t.loadData=function(e){console.log("loading - "+e);var n=JSON.parse(localStorage.getItem("profileSave"));t.setState({currentProfile:n,game:null},(function(){var a,i;console.log(n),t.setState({game:null===(a=t.state.currentProfile)||void 0===a||null===(i=a.games)||void 0===i?void 0:i.find((function(t){return t.name===e}))})}))},t.updateCurrentGame=function(e){t.setState({game:Object.assign({},t.state.game,{splits:e})},(function(){t.saveData()}))},t.changeTitle=function(e){t.setState({game:Object.assign({},t.state.game,{name:e})})},t.changePlatform=function(e){t.setState({game:Object.assign({},t.state.game,{platform:e})})},t.changeCategory=function(e){t.setState({game:Object.assign({},t.state.game,{category:e})})},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.loadData("initial-game")}},{key:"connectHandler",value:function(t){console.log("Gamepad ".concat(t," connected !"))}},{key:"disconnectHandler",value:function(t){console.log("Gamepad ".concat(t," disconnected !"))}},{key:"buttonChangeHandler",value:function(t){console.log("button change"+t)}},{key:"render",value:function(){var t,e,n,a,r,l,s,o,u=this;return i.a.createElement("div",{className:"App"},i.a.createElement(d.a,{onConnect:this.connectHandler,onDisconnect:this.disconnectHandler,onButtonChange:this.buttonChangeHandler},i.a.createElement(i.a.Fragment,null)),i.a.createElement(M,null,i.a.createElement("select",{placeholder:"Select Game",disabled:!(null===(t=this.state.currentProfile)||void 0===t||null===(e=t.games)||void 0===e?void 0:e.length),onChange:function(t){return u.loadData(t.target.value)}},i.a.createElement("option",{selected:"selected"},"Select a Game"),null===(n=this.state.currentProfile)||void 0===n||null===(a=n.games)||void 0===a?void 0:a.map((function(t){return i.a.createElement("option",{key:t.name},t.name)}))),i.a.createElement("button",{onClick:function(){return u.setState({editMode:!u.state.editMode})}},"Edit Mode")),i.a.createElement(v,{changeCategory:this.changeCategory,changeTitle:this.changeTitle,changePlatform:this.changePlatform,gamePlatform:(null===(r=this.state.game)||void 0===r?void 0:r.platform)||"",gameCategory:(null===(l=this.state.game)||void 0===l?void 0:l.category)||"",gameName:(null===(s=this.state.game)||void 0===s?void 0:s.name)||""}),i.a.createElement(P,{editMode:this.state.editMode,currentProfile:this.state.currentProfile,game:this.state.game,updateCurrentGame:this.updateCurrentGame,globalTime:this.state.globalTime,stopTimers:this.stopTimers,toggleGlobalTimer:this.toggleGlobalTimer,toggleGlobalPause:this.toggleGlobalPause,globalTimerOn:this.state.globalTimerOn,globalTimerPaused:this.state.globalTimerPaused,splits:(null===(o=this.state.game)||void 0===o?void 0:o.splits)||[{id:"init-split"}]}),i.a.createElement(w,{updateGlobalTime:this.updateGlobalTime,toggleGlobalTimer:this.toggleGlobalTimer,toggleGlobalPause:this.toggleGlobalPause,globalTimerOn:this.state.globalTimerOn,globalTimerPaused:this.state.globalTimerPaused}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.1e42f9cc.chunk.js.map