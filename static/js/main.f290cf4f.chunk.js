(this["webpackJsonpcross-split"]=this["webpackJsonpcross-split"]||[]).push([[0],{19:function(t,e,a){t.exports=a(30)},24:function(t,e,a){},30:function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),l=a(13),s=a.n(l),r=(a(24),a(1)),o=a(2),u=a(5),c=a(6),m=a(3),p=a(14),h=a.n(p),d=a(4);function g(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return g=function(){return t},t}var f=d.a.div(g()),v=function(t){return n.a.createElement(f,null,n.a.createElement("input",{placeholder:"Game",onChange:function(e){return t.changeTitle(e.target.value)},value:t.gameName||""}),n.a.createElement("input",{placeholder:"Platform",onChange:function(e){return t.changePlatform(e.target.value)},value:t.gamePlatform||""}),n.a.createElement("input",{placeholder:"Category",onChange:function(e){return t.changeCategory(e.target.value)},value:t.gameCategory||""}))},b=a(18);function T(){var t=Object(m.a)(["\n  display: flex;\n  height: 40px;\n  align-items: center;\n  justify-content: center;\n"]);return T=function(){return t},t}var S=d.a.div(T()),O=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t,e,a=this;return n.a.createElement(S,null,n.a.createElement("input",{placeholder:"Split title",value:(null===(t=this.props.split)||void 0===t?void 0:t.name)||"",onChange:function(t){return a.props.updateSplitValue(t.target.value,a.props.split.id,"name")}}),n.a.createElement("h1",null,(null===(e=this.props.split)||void 0===e?void 0:e.previousTime)||"--"),n.a.createElement("button",{onClick:function(){return a.props.addSplit(a.props.index)}},"Add Split ^"),n.a.createElement("button",{onClick:function(){return a.props.addSplit(a.props.index+1)}},"Add Split V"),n.a.createElement("button",{onClick:function(){return a.props.removeSplit(a.props.split)}},"delete"))}}]),a}(i.Component);function y(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return y=function(){return t},t}var P=d.a.div(y());Array.prototype.insert=function(t,e){return this.splice(t,0,e)};var k=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(r.a)(this,a);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))).state={splits:[{id:"init-split"}],currentSplitIndex:0},t.cleanSplits=function(){t.setState({splits:t.props.splits,currentSplitIndex:0})},t.removeSplit=function(e){var a,i=null===(a=t.state.splits)||void 0===a?void 0:a.filter((function(t){return t!==e}));t.setState({splits:i})},t.addSplit=function(e){var a=t.state.splits;a.insert(e,{id:Date.now()}),a.filter((function(t){return t})),t.setState({splits:a})},t.updateSplitValue=function(e,a,i){var n,l=null===(n=t.state.splits)||void 0===n?void 0:n.map((function(t){return t.id===a?Object.assign({},t,Object(b.a)({},i,e)):t}));t.setState({splits:l})},t.nextSplit=function(){var e,a;t.setPrevTime(),t.state.currentSplitIndex>=(null===(e=t.state.splits)||void 0===e?void 0:e.length)-1?t.setState({currentSplitIndex:0},(function(){t.props.stopTimers()})):t.state.currentSplitIndex<=(null===(a=t.state.splits)||void 0===a?void 0:a.length)-1&&t.setState({currentSplitIndex:t.state.currentSplitIndex+1})},t.setPrevTime=function(){var e=t.state.splits[t.state.currentSplitIndex];t.updateSplitValue(t.props.globalTime,e.id,"previousTime")},t.clearSplitTimes=function(){var e,a=null===(e=t.state.splits)||void 0===e?void 0:e.map((function(t){return Object.assign({},t,{previousTime:null})}));t.setState({splits:a})},t}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(t){t.currentProfile!==this.props.currentProfile&&this.cleanSplits(),t.game!==this.props.game&&this.cleanSplits()}},{key:"render",value:function(){var t,e,a,i=this;return n.a.createElement(P,null,n.a.createElement("div",null,null===(t=this.state.splits)||void 0===t?void 0:t.map((function(t,e){return n.a.createElement(O,{globalTimerOn:i.props.globalTimerOn,globalTimerPaused:i.props.globalTimerPaused,isCurrentSplit:e===i.state.currentSplitIndex,key:t.id,index:e,updateSplitValue:i.updateSplitValue,addSplit:i.addSplit,removeSplit:i.removeSplit,split:t,globalTime:i.props.globalTime})}))),n.a.createElement("button",{disabled:!this.props.globalTimerOn||this.props.globalTimerPaused,onClick:function(){return i.nextSplit()}},"Next Split"),n.a.createElement("button",{disabled:this.props.globalTimerOn||this.props.globalTimerPaused||!(null===(e=this.state.splits[0])||void 0===e?void 0:e.previousTime),onClick:function(){return i.clearSplitTimes()}},"Clear Times"),n.a.createElement("button",{disabled:!(null===(a=this.props.game)||void 0===a?void 0:a.name),onClick:function(){return i.props.updateCurrentGame(i.state.splits)}},"Save Splits"))}}]),a}(i.Component),C=a(7),x=a.n(C),E=function(){function t(e,a,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(r.a)(this,t),this.remaining=0,this.state=0,this.name=e,this.interval=i,this.callback=a,this.maxFires=n,this.pausedTime=0,this.startTimeStamp=null,this.currentTimeStamp=null,this.count=0,this.fires=0,this.currentTime=""}return Object(o.a)(t,[{key:"proxyCallback",value:function(){this.currentTimeStamp=x()(),this.count=+this.currentTimeStamp-+this.startTimestamp,null!==this.maxFires&&this.fires>=this.maxFires?this.stop():(this.lastTimeFired=new Date,this.fires++,this.count>3599999?this.currentTime=x()(this.count).utcOffset(0).format("HH:mm:ss.SS"):this.count>59999?this.currentTime=x()(this.count).utcOffset(0).format("mm:ss.SS"):this.currentTime=x()(this.count).utcOffset(0).format("ss.SS"),this.callback())}},{key:"start",value:function(t,e){var a=this;t&&(this.startTimestamp=x()()),e&&(console.log(e,"-=-=-=-=-= New Start Point",this.name),this.startTimestamp=x()().add(e,"milliseconds")),this.timerId=setInterval((function(){return a.proxyCallback()}),this.interval),this.lastTimeFired=new Date,this.state=1,this.fires=0}},{key:"pause",value:function(){1!==this.state&&3!==this.state||(console.log("Pausing Timer "+this.name),this.remaining=this.interval-(new Date-this.lastTimeFired)+this.pausedTime,this.lastPauseTime=new Date,clearInterval(this.timerId),clearTimeout(this.resumeId),this.state=2,this.callback())}},{key:"resume",value:function(){var t=this;2===this.state&&(this.pausedTime+=new Date-this.lastPauseTime,console.log("Resuming Timer ".concat(this.name," with ").concat(this.remaining," remaining")),this.state=3,this.resumeId=setTimeout((function(){return t.timeoutCallback()}),this.remaining),this.callback())}},{key:"timeoutCallback",value:function(){3===this.state&&(this.pausedTime=0,this.proxyCallback(),this.start(!1))}},{key:"stop",value:function(){0!==this.state&&(console.log("Stopping Timer %s. Fired %s/%s times",this.name,this.fires,this.maxFires),clearInterval(this.timerId),clearTimeout(this.resumeId),this.currentTime="",this.state=0,this.callback())}},{key:"setInterval",value:function(t){console.log("Changing interval from %s to %s for %s",this.interval,t,this.name),1===this.state?(this.pause(),this.interval=t,this.resume()):this.interval=t}},{key:"setMaxFires",value:function(t){null!==t&&this.fires>=t&&this.stop(),this.maxFires=t}}]),t}();function j(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return j=function(){return t},t}var G=d.a.div(j()),w=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(r.a)(this,a);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))).state={currentTime:"",timerState:null,lastKnownTime:null},t.timer=new E("main",(function(){t.updateTimer()}),10),t.updateTimer=function(){t.setState({currentTime:t.timer.currentTime,timerState:t.timer.state},(function(){t.props.updateGlobalTime(t.timer.currentTime)}))},t}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.globalTimerOn||this.props.globalTimerOn||this.props.globalTimerPaused||this.setState({lastKnownTime:this.state.currentTime},(function(){e.timer.stop()}))}},{key:"render",value:function(){var t=this;return n.a.createElement(G,null,n.a.createElement("h1",null,this.state.currentTime||this.state.lastKnownTime),n.a.createElement("button",{disabled:1===this.state.timerState||2===this.state.timerState,onClick:function(){t.props.toggleGlobalTimer(),t.timer.start(!0)}},"Start"),n.a.createElement("button",{disabled:0===this.state.timerState||1!==this.state.timerState||!this.state.timerState,onClick:function(){t.timer.stop(),t.props.toggleGlobalTimer()}},"Stop"),n.a.createElement("button",{disabled:1!==this.state.timerState||2===this.state.timerState||!this.state.timerState,onClick:function(){t.timer.pause(),t.props.toggleGlobalPause()}},"Pause"),n.a.createElement("button",{disabled:2!==this.state.timerState||3===this.state.timerState,onClick:function(){t.timer.resume(),t.props.toggleGlobalPause()}},"Resume"))}}]),a}(i.Component);function I(){var t=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return I=function(){return t},t}var D=d.a.div(I()),F=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(r.a)(this,a);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))).state={game:null,currentProfile:null,globalTimerOn:!1,globalTimerPaused:!1,splitStartPoint:0,globalTime:0},t.toggleGlobalTimer=function(){t.setState({globalTimerOn:!t.state.globalTimerOn})},t.toggleGlobalPause=function(){t.setState({globalTimerPaused:!t.state.globalTimerPaused})},t.stopTimers=function(){t.setState({globalTimerOn:!1,globalTimerPaused:!1})},t.updateGlobalTime=function(e){t.setState({globalTime:e})},t.buildSaveObject=function(){var e,a={games:(null===(e=t.state.currentProfile)||void 0===e?void 0:e.games)||[]};return a.games=a.games.filter((function(e){return e.name!==t.state.game.name})),a.games.find((function(e){return e.name===t.state.game.name}))||a.games.push(t.state.game),a},t.saveData=function(){var e=t.buildSaveObject();localStorage.setItem("profileSave",JSON.stringify(e)),t.loadData(t.state.game.name)},t.loadData=function(e){console.log("loading - "+e);var a=JSON.parse(localStorage.getItem("profileSave"));t.setState({currentProfile:a,game:null},(function(){var i,n;console.log(a),t.setState({game:null===(i=t.state.currentProfile)||void 0===i||null===(n=i.games)||void 0===n?void 0:n.find((function(t){return t.name===e}))})}))},t.updateCurrentGame=function(e){t.setState({game:Object.assign({},t.state.game,{splits:e})},(function(){t.saveData()}))},t.changeTitle=function(e){t.setState({game:Object.assign({},t.state.game,{name:e})})},t.changePlatform=function(e){t.setState({game:Object.assign({},t.state.game,{platform:e})})},t.changeCategory=function(e){t.setState({game:Object.assign({},t.state.game,{category:e})})},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.loadData("initial-game")}},{key:"connectHandler",value:function(t){console.log("Gamepad ".concat(t," connected !"))}},{key:"disconnectHandler",value:function(t){console.log("Gamepad ".concat(t," disconnected !"))}},{key:"buttonChangeHandler",value:function(t){console.log("button change"+t)}},{key:"render",value:function(){var t,e,a,i,l,s,r,o,u=this;return n.a.createElement("div",{className:"App"},n.a.createElement(h.a,{onConnect:this.connectHandler,onDisconnect:this.disconnectHandler,onButtonChange:this.buttonChangeHandler},n.a.createElement(n.a.Fragment,null)),n.a.createElement(D,null,n.a.createElement("select",{placeholder:"Select Game",disabled:!(null===(t=this.state.currentProfile)||void 0===t||null===(e=t.games)||void 0===e?void 0:e.length),onChange:function(t){return u.loadData(t.target.value)}},n.a.createElement("option",{selected:"selected"},"Select a Game"),null===(a=this.state.currentProfile)||void 0===a||null===(i=a.games)||void 0===i?void 0:i.map((function(t){return n.a.createElement("option",{key:t.name},t.name)})))),n.a.createElement(v,{changeCategory:this.changeCategory,changeTitle:this.changeTitle,changePlatform:this.changePlatform,gamePlatform:(null===(l=this.state.game)||void 0===l?void 0:l.platform)||"",gameCategory:(null===(s=this.state.game)||void 0===s?void 0:s.category)||"",gameName:(null===(r=this.state.game)||void 0===r?void 0:r.name)||""}),n.a.createElement(k,{currentProfile:this.state.currentProfile,game:this.state.game,updateCurrentGame:this.updateCurrentGame,globalTime:this.state.globalTime,stopTimers:this.stopTimers,toggleGlobalTimer:this.toggleGlobalTimer,toggleGlobalPause:this.toggleGlobalPause,globalTimerOn:this.state.globalTimerOn,globalTimerPaused:this.state.globalTimerPaused,splits:(null===(o=this.state.game)||void 0===o?void 0:o.splits)||[{id:"init-split"}]}),n.a.createElement(w,{updateGlobalTime:this.updateGlobalTime,toggleGlobalTimer:this.toggleGlobalTimer,toggleGlobalPause:this.toggleGlobalPause,globalTimerOn:this.state.globalTimerOn,globalTimerPaused:this.state.globalTimerPaused}))}}]),a}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.f290cf4f.chunk.js.map